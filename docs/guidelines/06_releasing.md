# リリース前チェックガイド

## ビルドチェック

### 必須チェック項目

コード変更後は、必ず以下のビルドチェックを実行：

#### 1. 基本ビルドチェック

```bash
NEXT_BUILD_DIR=.next_tmp npm run build --no-lint
```

#### 2. 型チェック付きビルド

```bash
NEXT_BUILD_DIR=.next_tmp npm run build
```

#### 3. テスト実行

```bash
npm test              # 全テスト実行
npm run test:watch    # watchモードでテスト実行
npm run test:coverage # カバレッジ付きテスト実行
```

#### 4. Lintチェック

```bash
npm run lint
```

### チェック基準

- **エラー**: ビルドエラーが発生した場合は必ず修正
- **警告**: ESLintの警告は可能な限り修正（未使用変数など）
- **プリレンダリング**: SSG/SSRエラーが発生しないことを確認
- **型安全性**: TypeScriptの型エラーがないことを確認

## コードレビュー

詳細は `@docs/guidelines/07_code-review.md` を参照。

基本方針: 各ガイドラインに沿っていることを確認する。

## ドメインモデル図との同期

### 更新必須タイミング

- public メソッド・プロパティを追加・変更・削除した時
- `index.ts` の export を変更した時
- リファクタリング後

### 更新対象

`@docs/aidlc/inception/ドメインモデル.pu`

### 記載ルール

1. **Public メソッド・プロパティ**: すべて記載
2. **`index.ts` から export されているクラス・関数**: すべて記載
3. **Private メソッド・プロパティ**: 記載不要
4. **`@internal` の要素**: 記載不要

### 確認方法

- クラス図と実装を見比べて、public メソッドが一致しているか確認
- 追加・削除されたメソッドがないか確認

## デプロイ手順

### 本番環境へのデプロイ前

1. すべてのビルドチェックをパス
2. すべてのテストをパス
3. ドメインモデル図が最新化されている
4. コードレビューが完了している

### デプロイ後

- 本番環境でのスモークテスト実施
- エラーログの監視
- ユーザーフィードバックの収集

### 注意事項

- **npm run dev 等のローカルサーバーは起動しない**: 既に起動済みであることが多いため、明示的に起動・停止しない
